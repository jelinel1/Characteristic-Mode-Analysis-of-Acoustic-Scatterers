function validateAttributes(obj, varargin)
%% validateAttributes validates input attributes with better error message
% This function reduces error stack generated by validateattributes().
%
% Included in AToM, info@antennatoolbox.com
% (c) 2015, Vladimir Sedenka, BUT, vladimir.sedenka@antennatoolbox.com

try
   validateattributes(varargin{:});  % pass everything as is
catch ME
   errorStruct = struct(...
      'identifier', sprintf('ERROR:%s', ME.identifier), ...
      'message', ME.message);
   if ~isempty(inputname(2))
      errorStruct.message = sprintf('Problem with input argument "%s". %s', ...
         inputname(2), errorStruct.message);
   end
   obj.deliver(errorStruct);
end

end

